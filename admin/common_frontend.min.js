if(typeof nRelate=="undefined"){var nRelate=window.nRelate={domain:"",clicked_link:null,load_link:false,track_enabled:[false,false,false],domready:false,domready_bound:false,domready_list:[],flyout_show:false,ie_browser:navigator.appName=="Microsoft Internet Explorer",loadFrame:function(){if(nRelate.load_link){nRelate.load_link=false;window.location.href=nRelate.clicked_link}},tracking:function(a){if(typeof jQuery=="undefined"){setTimeout(arguments.callee,0);return}var b=nRelate;if(a=="rc"&&b.track_enabled[0])return;if(a=="mp"&&b.track_enabled[1])return;if(a=="fo"&&b.track_enabled[2])return;if(a=="ns"&&b.track_enabled[3])return;if(a=="rc")b.track_enabled[0]=true;else if(a=="mp")b.track_enabled[1]=true;else if(a=="fo")b.track_enabled[2]=true;else b.track_enabled[3]=true;jQuery(".nr_"+a+"_link").live("click",function(c){if(jQuery(this).hasClass("nr_partner")){return true}var d=window.location.href;var e="http://t.nrelate.com/tracking/";if(jQuery(this).hasClass("nr_avid")){nr_type="avid"}else if(jQuery(this).hasClass("nr_external")){nr_type="external"}else{nr_type="internal"}e+="?plugin="+escape(a)+"&type="+escape(nr_type)+"&domain="+b.domain+"&src_url="+escape(d)+"&dest_url="+escape(jQuery(this).attr("href"));if(nr_type!="avid"){b.load_link=true;b.clicked_link=jQuery(this).attr("href")}on_load_function=c.ctrlKey||c.metaKey?"void(0)":"nRelate.loadFrame()";jQuery('<iframe id="nr_clickthrough_frame_'+Math.ceil(100*Math.random())+'" height="0" width="0" style="border-width: 0px; display:none;" src="'+e+'" onload="javascript:'+on_load_function+'"></iframe>').appendTo("body");return c.ctrlKey||c.metaKey?true:false})},fixHeight:function(a){if(typeof jQuery=="undefined"){var b=arguments.callee;setTimeout(function(){b(a)},0);return}var c="#"+a+" a";if(jQuery(c+":first").length==0)return;var d=0,e=0,f=new Array,g,h=0,i=0,j=0,k=0,l="";e=jQuery(c+":first").position().top;jQuery(c).each(function(){g=jQuery(this);g.append('<div class="nr_clear" style="height:1px;"></div>');topPostion=g.position().top;if(e!=topPostion){for(currentDiv=0;currentDiv<f.length;currentDiv++){f[currentDiv].height(d)}f.length=0;e=topPostion;d=g.innerHeight();f.push(g)}else{f.push(g);d=d<g.innerHeight()?g.innerHeight():d}for(currentDiv=0;currentDiv<f.length;currentDiv++){f[currentDiv].height(d)}});h=jQuery(c+":first").position().top;var m=jQuery(c);for(var n=0;n<m.length;n++){if(jQuery(m[n]).position().top!=h)break;i++}j=Math.ceil(m.length/i);var o=1,p=1,q,r,s,t,u,v;for(var n=0;n<m.length;n++){g=jQuery(m[n]);q=o%2==0?" nr_even_row":" nr_odd_row";r=p%2==0?" nr_even_col":" nr_odd_col";s=p==1?" nr_first_col":"";t=p==i&&s==""?" nr_last_col":"";u=o==1?" nr_first_row":"";v=o==j&&u==""?" nr_last_row":"";g.addClass("nr_row_"+o+" nr_col_"+p+q+r+s+t+u+v);p++;if(p>i){p=1;o++}}jQuery("#"+a+".nrelate_pol").addClass("rotate")},adAnimation:function(a){if(typeof jQuery=="undefined"){var b=arguments.callee;setTimeout(function(){b(a)},0);return}jQuery("#"+a+" .nr_panel .nr_sponsored").hover(function(){jQuery(this).stop();jQuery(this).animate({left:"0px"},200)},function(){jQuery(this).stop();jQuery(this).animate({left:jQuery(this).parent().width()-18+"px"},200)})},getScript:function(a,b){var c=document.createElement("script");c.type="text/javascript";c.src=a;if(b)c.async=true;document.getElementsByTagName("head")[0].appendChild(c)},bindDomReady:function(a){var b=nRelate;if(b.domready){a();return}b.domready_list.push(a);if(b.domready_bound)return;b.domready_bound=true;if(document.addEventListener){document.addEventListener("DOMContentLoaded",b.domReadyReached,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",b.readyStateChange);var c=false;try{c=window.frameElement==null}catch(d){}if(document.documentElement.doScroll&&c){b.scrollCheck()}}},readyStateChange:function(){var a=document,b=arguments.callee;if(a.readyState==="complete"){a.detachEvent("onreadystatechange",b);nRelate.domReadyReached()}},scrollCheck:function(){var a=nRelate;if(a.domready){a.domReadyReached();return}try{document.documentElement.doScroll("left")}catch(b){setTimeout(a.scrollCheck,0);return}a.domReadyReached()},domReadyReached:function(){var a=nRelate;if(a.domready)return;a.domready=true;if(document.addEventListener)document.removeEventListener("DOMContentLoaded",a.domReadyReached,false);for(var b=0;b<a.domready_list.length;b++){a.domready_list[b]()}a.domready_list=[]},getNrelatePosts:function(a){var b=nRelate;if(b.ie_browser&&!b.domready){b.bindDomReady(function(){b.getNrelatePosts(a)});return}if(b.ie_browser){b.getScript(a,true)}else{b.jsIframe(a,"nRelate=window.parent.nRelate;")}},sw:function(a,b){var c=nRelate;var d="";if(b.match("popular"))d="mp";if(b.match("related"))d="rc";if(b.match("flyout"))d="fo";if(b.match("nsquared"))d="ns";if(document.getElementById(b)){document.getElementById(b).innerHTML=a;c.fixHeight(b);c.adAnimation(b);c.tracking(d)}},jsIframe:function(a,b){var c=document;nrDiv=c.createElement("div");nrDiv.style.display="none";ifr=c.createElement("iframe");ifr.frameBorder="0";ifr.allowTransparency="true";nrDiv.appendChild(ifr);c.body.appendChild(nrDiv);domainSrc="javascript:var d=document.open(); d.domain='"+c.domain+"';";try{ifr.contentWindow.document.open()}catch(d){iframe.src=domainSrc+"void(0);"}var e="";b=typeof b=="string"?b:"";a=a.replace(/\'/g,"\\'");iframe_html='<body onload="d=document; '+b+"d.getElementsByTagName('head')[0].appendChild(d.createElement('script')).src='"+a+"';\"></body>";try{var f=ifr.contentWindow.document;f.write(iframe_html);f.close()}catch(d){ifr.src=domainSrc+'d.write("'+iframe_html.replace(/"/g,'\\"')+'");d.close();'}},flyout_fix_height:function(){jQuery(".nrelate_flyout").css({right:"0px",display:"none"})}}}